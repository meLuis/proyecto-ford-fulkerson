<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algoritmo Ford-Fulkerson - Flujo MÃ¡ximo</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸŒŠ Algoritmo Ford-Fulkerson</h1>
            <p>VisualizaciÃ³n interactiva del problema de flujo mÃ¡ximo</p>
        </header>

        <div class="main-content">
            <!-- Panel de configuraciÃ³n -->
            <div class="panel config-panel">
                <h2>ğŸ“‹ ConfiguraciÃ³n del Grafo</h2>
                
                <div class="form-group">
                    <label for="nodos">NÃºmero de nodos (8-16):</label>
                    <input type="number" id="nodos" min="8" max="16" value="8">
                </div>

                <div class="form-group">
                    <label>Tipo de grafo:</label>
                    <div class="radio-group">
                        <label for="aleatorio">
                            <input type="radio" id="aleatorio" name="tipo" value="aleatorio" checked>
                            ğŸ² Aleatorio
                        </label>
                        
                        <label for="manual">
                            <input type="radio" id="manual" name="tipo" value="manual">
                            âœï¸ Manual
                        </label>
                    </div>
                </div>

                <!-- Panel para entrada manual -->
                <div id="manual-panel" class="hidden">
                    <h3>âœï¸ Agregar Aristas Manualmente</h3>
                    
                    <!-- Entrada de texto masiva -->
                    <div class="texto-masivo-section">
                        <label for="aristas-texto">Ingresa aristas (formato: origen,destino,capacidad):</label>
                        <textarea id="aristas-texto" placeholder="Ejemplo:&#10;3,4,5&#10;4,5,9&#10;2,8,4&#10;1,6,10" rows="6"></textarea>
                        <button id="procesar-texto" class="btn btn-secondary">ğŸ“‹ Procesar Lista</button>
                        <p class="help-text">ğŸ’¡ Cada lÃ­nea debe tener el formato: <code>origen,destino,capacidad</code></p>
                    </div>

                    <div class="separador">
                        <span>O agregar una por una</span>
                    </div>
                    
                    <div class="arista-input">
                        <div class="input-group">
                            <label for="origen">Origen:</label>
                            <input type="number" id="origen" placeholder="1" min="1" step="1">
                        </div>
                        <div class="input-group">
                            <label for="destino">Destino:</label>
                            <input type="number" id="destino" placeholder="2" min="1" step="1">
                        </div>
                        <div class="input-group">
                            <label for="capacidad">Capacidad:</label>
                            <input type="number" id="capacidad" placeholder="10" min="1" step="1">
                        </div>
                        <button id="agregar-arista" class="btn btn-secondary">â• Agregar</button>
                    </div>
                    
                    <div id="aristas-lista">
                        <h4>ğŸ“‹ Aristas agregadas:</h4>
                        <div class="aristas-container">
                            <div id="aristas-empty" class="empty-state">
                                <p>AÃºn no has agregado ninguna arista</p>
                                <p>ğŸ‘† Usa el formulario de arriba para comenzar</p>
                            </div>
                            <ul id="lista-aristas"></ul>
                        </div>
                    </div>
                </div>

                <button id="generar-grafo" class="btn btn-primary">ğŸ”„ Generar Grafo</button>
            </div>

            <!-- Panel de visualizaciÃ³n -->
            <div class="panel visualization-panel">
                <h2>ğŸ•¸ï¸ VisualizaciÃ³n del Grafo</h2>
                <div id="graph-container">
                    <svg id="graph-svg"></svg>
                </div>
                
                <div id="graph-info" class="hidden">
                    <div class="info-row">
                        <div class="form-group">
                            <label for="fuente">Nodo fuente:</label>
                            <select id="fuente"></select>
                        </div>
                        <div class="form-group">
                            <label for="sumidero">Nodo sumidero:</label>
                            <select id="sumidero"></select>
                        </div>
                        <button id="calcular-flujo" class="btn btn-success">ğŸš€ Calcular Flujo MÃ¡ximo</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel de resultados -->
        <div id="results-panel" class="panel hidden">
            <h2>ğŸ“Š Resultados del Algoritmo</h2>
            
            <div class="results-summary">
                <div class="result-card">
                    <h3>Flujo MÃ¡ximo</h3>
                    <div id="flujo-maximo" class="big-number">0</div>
                </div>
                <div class="result-card">
                    <h3>Iteraciones</h3>
                    <div id="num-iteraciones" class="big-number">0</div>
                </div>
            </div>

            <div class="algorithm-steps">
                <h3>ğŸ” Pasos del Algoritmo</h3>
                <div class="controls">
                    <button id="paso-anterior" class="btn btn-secondary">â¬…ï¸ Anterior</button>
                    <span id="paso-actual">Paso 0 de 0</span>
                    <button id="paso-siguiente" class="btn btn-secondary">â¡ï¸ Siguiente</button>
                    <button id="auto-play" class="btn btn-primary">â–¶ï¸ Auto</button>
                </div>
                <div id="paso-descripcion" class="step-description"></div>
            </div>

            <div class="cut-info">
                <h3>âœ‚ï¸ Corte MÃ­nimo</h3>
                <div id="corte-descripcion"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>